define("scalejs.functional/functional",[],function(){function t(){var e=Array.prototype.slice.call(arguments,0).reverse();return function(){var t=e.reduce(function(e,t){return[t.apply(undefined,e)]},Array.prototype.slice.call(arguments));return t[0]}}function n(){var e=Array.prototype.slice.call(arguments,0);return function(){var t=e.reduce(function(e,t){return[t.apply(undefined,e)]},Array.prototype.slice.call(arguments,0));return t[0]}}function r(e,t){var n=Array.prototype.slice.call(arguments,2);return function(){return t.apply(e,n.concat(Array.prototype.slice.call(arguments,0)))}}function i(e,t){return function(){return e.apply(undefined,Array.prototype.slice.call(arguments,0,t))}}function s(e,t){if(arguments.length===1)return s(e,e.length);var n=Array.prototype.slice.call(arguments,2);return n.length>=t?e.apply(undefined,n):function(){var r=n.concat(Array.prototype.slice.call(arguments,0));return r.unshift(e,t),s.apply(undefined,r)}}function o(){var t=Array.prototype.slice.call(arguments,0),n=t.reduce(function(t,n,r){return n===e?t.concat([r]):t},[]);return n.length===0?t[0].apply(undefined,t.slice(1)):function(){var e;for(e=0;e<Math.min(n.length,arguments.length);e+=1)t[n[e]]=arguments[e];return o.apply(undefined,t)}}var e={};return{_:e,compose:t,sequence:n,bind:r,aritize:i,curry:s,partial:o}}),define("scalejs.functional/builder",["scalejs!core"],function(e){function r(e){function i(){return{}}function s(e,t){if(!t||t.kind!=="$")return t;if(typeof t.expr=="function")return t.expr.call(e);if(typeof t.expr=="string")return e[t.expr];throw new Error("Parameter in $(...) must be either a function or a string referencing a binding.")}function o(i,o,u,a){function f(e){return e==="$return"||e==="$RETURN"||e==="$yield"||e==="$YIELD"}if(typeof e[i]!="function")throw new Error("This control construct may only be used if the computation expression builder defines a `"+i+"` method.");var l=s(o,u);if(a.length>0){if(typeof e.combine!="function")throw new Error("This control construct may only be used if the computation expression builder defines a `combine` method.");if(!f(i))return i==="$for"?e.combine(e.$for(u.items,function(e){var i=n.copy(u.cexpr),s=t(o);return s[u.name]=e,r(s,i)}),r(o,a)):e.combine(e[i].call(o,l),r(o,a));if(typeof e.delay!="function")throw new Error("This control construct may only be used if the computation expression builder defines a `delay` method.");return e.combine(e[i].call(o,l),e.delay.call(o,function(){return r(o,a)}))}return f(i)?e[i].call(o,l):e.combine(e[i].call(o,l),r(o,a))}var r;return e.missing||(e.missing=function(e){throw e.kind?new Error('Unknown operation "'+e.kind+'". '+"Either define `missing` method on the builder or fix the spelling of the operation."):new Error("Expression "+JSON.stringify(e)+" cannot be processed. "+"Either define `missing` method on the builder or convert expression to a function.")}),r=function(t,n){if(n.length===0){if(e.zero)return e.zero();throw new Error("Computation expression builder must define `zero` method.")}var i=n.shift();return i.kind==="let"?(t[i.name]=s(t,i.expr),r(t,n)):i.kind==="do"?(i.expr.call(t),r(t,n)):i.kind==="letBind"?e.bind.call(t,s(t,i.expr),function(e){return t[i.name]=e,r(t,n)}):i.kind==="doBind"||i.kind==="$"?e.bind.call(t,i.expr.bind(t),function(){return r(t,n)}):i.kind==="$return"||i.kind==="$RETURN"||i.kind==="$yield"||i.kind==="$YIELD"?o(i.kind,t,i.expr,n):i.kind==="$for"?o("$for",t,i,n):typeof i=="function"&&e.call?(e.call(t,i),r(t,n)):typeof i=="function"?(i.call(t,i),r(t,n)):o("missing",t,i,n)},function(){function o(){var e={mixins:Array.prototype.slice.call(arguments,0)},t=s.bind(e);return t.mixin=function(){return Array.prototype.push.apply(e.mixins,arguments),t},t}var t=n.copy(arguments),s=function(){var n=Array.prototype.slice.call(arguments,0),s=i(),o,u;return this.mixins&&this.mixins.forEach(function(e){e.beforeBuild&&e.beforeBuild(s,n)}),e.delay?u=e.delay(function(){return r(s,n)}):u=r(s,n),e.run?o=e.run.apply(null,[u].concat(t)):o=u,this.mixins&&this.mixins.forEach(function(e){e.afterBuild&&(o=e.afterBuild(o))}),o};return s.mixin=o,s}}var t=e.object.merge,n=e.array;return r.$let=function(e,t){return{kind:"let",name:e,expr:t}},r.$LET=function(e,t){return{kind:"letBind",name:e,expr:t}},r.$do=function(e){return{kind:"do",expr:e}},r.$DO=function(e){return{kind:"doBind",expr:e}},r.$return=function(e){return{kind:"$return",expr:e}},r.$RETURN=function(e){return{kind:"$RETURN",expr:e}},r.$yield=function(e){return{kind:"$yield",expr:e}},r.$YIELD=function(e){return{kind:"$YIELD",expr:e}},r.$for=function(e,t){var n=Array.prototype.slice.call(arguments,2);return{kind:"$for",name:e,items:t,cexpr:n}},r.$=function(e){return{kind:"$",expr:e}},r}),define("scalejs.functional",["scalejs!core","./scalejs.functional/functional","./scalejs.functional/builder"],function(e,t,n){e.registerExtension({functional:e.object.merge(t,{builder:n})})});